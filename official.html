<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jisan X</title>
    <meta name="theme-color" content="#1e3c72">
    <!-- Favicon -->
    <link rel="icon" href="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg" type="image/jpeg">
    <link rel="apple-touch-icon" sizes="180x180" href="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg">
    <link rel="icon" type="image/png" sizes="32x32" href="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg">
    <link rel="icon" type="image/png" sizes="16x16" href="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg">
    <meta name="msapplication-TileImage" content="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg">
    <meta property="og:image" content="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <meta name="description" content="Connect with TraderJisanX on Telegram or visit the website">
    <style>
        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            min-height: 100vh;
            background-color: #1e3c72;
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            position: relative;
        }

        /* Rainy Background Animation */
        .money-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .money-background::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(125deg, #1e3c72 0%, #2a5298 50%, #1e3c72 100%);
        }

        /* Raindrop/Snowflake floating animation */
        @keyframes float {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(1000px) rotate(10deg);
                opacity: 0;
            }
        }

        .money-background::after {
            content: "❄ ❅ ❆ ❉ ✼ ✻";
            position: absolute;
            font-size: 24px;
            color: rgba(255, 255, 255, 0.7);
            width: 100%;
            text-align: center;
            animation: float 15s linear infinite;
            top: 0;
        }

        /* Generate multiple money symbols with different animations */
        .container {
            position: relative;
            width: 100%;
            max-width: 900px;
            background: rgba(30, 60, 114, 0.6);
            border-radius: 20px;
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 25px 45px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.1);
            padding: 40px;
            margin: 20px;
            z-index: 1;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Header Styles */
        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            z-index: 5; /* Higher z-index to keep text above snowflakes */
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(to right, #89f7fe, #66a6ff);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradientShift 5s ease infinite;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 5; /* Keep text above snowflakes */
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        .highlight {
            color: #66a6ff;
            -webkit-text-fill-color: initial;
            position: relative;
            display: inline-block;
        }

        .highlight::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, #89f7fe, #66a6ff);
            bottom: -5px;
            left: 0;
            border-radius: 10px;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
        }

        .subtitle {
            color: #aaa;
            font-size: 1.1rem;
            margin-top: 20px;
            position: relative;
            z-index: 5; /* Keep text above snowflakes */
        }

        /* Buttons Container */
        .buttons-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            position: relative;
            z-index: 5; /* Keep buttons above snowflakes */
        }

        /* Button Styles */
        .button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            text-decoration: none;
            color: white;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
            z-index: 5; /* Keep buttons above snowflakes */
            backdrop-filter: blur(8px); /* Add blur effect to enhance visibility */
        }

        .button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: all 0.6s ease;
            z-index: 0;
        }

        .button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.1);
        }

        .button:hover::before {
            left: 100%;
        }

        .button-content {
            display: flex;
            align-items: center;
            z-index: 6; /* Ensure button content is above snowflakes and button background */
            position: relative;
        }

        .logo-container {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(0, 0, 0, 0.2);
        }

        .logo {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .button:hover .logo {
            transform: scale(1.1);
        }

        .logo-icon {
            font-size: 30px;
            color: #89f7fe;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .button-text h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            font-weight: 600;
        }

        .button-text p {
            color: #aaa;
            font-size: 0.9rem;
        }

        .arrow {
            color: #89f7fe;
            font-size: 1.2rem;
            transition: transform 0.3s ease;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.4);
        }

        .button:hover .arrow {
            transform: translateX(5px);
        }

        /* Specific Button Styles */
        .telegram-channel {
            border-left: 4px solid #89f7fe;
        }

        .telegram-account {
            border-left: 4px solid #66a6ff;
        }

        .website {
            border-left: 4px solid #7f7fd5;
        }

        /* Footer Styles */
        .footer {
            margin-top: 40px;
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            position: relative;
            z-index: 5; /* Keep footer text above snowflakes */
        }

        /* Floating Animation for Raindrops/Snowflakes */
        .floating-money {
            position: fixed;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            z-index: 0 !important; /* Lower z-index to appear behind text and buttons */
            font-size: 18px;
            user-select: none;
            pointer-events: none; /* Allow clicking through snowflakes */
            animation-name: floating;
            animation-duration: 8s;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            opacity: 0.7;
            will-change: transform, opacity;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        /* Rain Overlay Styles */
        .rain-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.2) 100%);
            opacity: 0.2;
            animation: rain 5s linear infinite;
            pointer-events: none;
        }

        @keyframes rain {
            0% {
                background-position: 0px 0px;
                opacity: 0.1;
            }
            50% {
                opacity: 0.3;
            }
            100% {
                background-position: 500px 1000px;
                opacity: 0.1;
            }
        }

        /* Front snowflake styles */
        .front-snowflake {
            position: fixed;
            color: #fff;
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
            z-index: 0; /* Lower z-index to appear behind text and buttons */
            font-size: 14px;
            user-select: none;
            pointer-events: none;
            animation: frontFalling 15s linear infinite;
            will-change: transform, opacity;
            transform: translateZ(0);
            backface-visibility: hidden;
            perspective: 1000px;
        }

        @keyframes frontFalling {
            0% {
                transform: translateY(-50px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 0.7;
            }
            100% {
                transform: translateY(calc(100vh + 50px)) rotate(360deg);
                opacity: 0;
            }
        }

        /* Add shimmer effect to front snowflakes */
        .front-snowflake::after {
            content: "";
            position: absolute;
            top: -10%;
            left: -10%;
            width: 120%;
            height: 120%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            opacity: 0;
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { opacity: 0; }
            50% { opacity: 0.5; }
            100% { opacity: 0; }
        }

        @keyframes floating {
            0% {
                transform: translate(0, -20px) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.9;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translate(var(--move-x), var(--move-y)) rotate(var(--rotate));
                opacity: 0;
            }
        }

        /* Snow-free zone for text and buttons */
        .snow-free-zone {
            position: relative;
            z-index: 10; /* Ensure this is higher than snowflakes */
        }

        /* Add glow effect to button hover states */
        .button:hover {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3), 0 0 20px rgba(137, 247, 254, 0.5) !important;
        }

        /* Add clear areas around buttons and text */
        .header::before,
        .button::before {
            content: "";
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            z-index: -1;
            background: rgba(30, 60, 114, 0.3);
            border-radius: inherit;
            filter: blur(10px);
            pointer-events: none;
        }

        /* Optimize animation for reduced motion preference */
        @media (prefers-reduced-motion: reduce) {
            .floating-money,
            .front-snowflake {
                animation-duration: 30s !important;
            }
            
            .money-background::after {
                animation-duration: 30s !important;
            }
            
            .rain-overlay {
                animation-duration: 15s !important;
            }
            
            /* Reduce the amount of animations */
            @keyframes floating {
                0% {
                    transform: translate(0, -20px) rotate(0deg);
                    opacity: 0;
                }
                10% {
                    opacity: 0.6;
                }
                90% {
                    opacity: 0.3;
                }
                100% {
                    transform: translate(var(--move-x), var(--move-y)) rotate(var(--rotate));
                    opacity: 0;
                }
            }
        }

        /* Add class for idle state */
        .idle-mode .floating-money,
        .idle-mode .front-snowflake {
            animation-duration: 40s !important;
            opacity: 0.4;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .button-content {
                flex-direction: row;
                align-items: center;
            }
            
            .logo-container {
                width: 50px;
                height: 50px;
                margin-right: 15px;
            }
            
            .button-text h3 {
                font-size: 1rem;
            }
            
            .button-text p {
                font-size: 0.8rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 20px 15px;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .subtitle {
                font-size: 1rem;
            }
            
            .logo-container {
                width: 40px;
                height: 40px;
                margin-right: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="money-background">
        <div class="rain-overlay"></div>
    </div>
    
    <div class="container">
        <div class="header snow-free-zone">
            <h1>Welcome to <span class="highlight">Jisan X</span></h1>
            <p class="subtitle">Connect with me through any of these platforms</p>
        </div>
        
        <div class="buttons-container snow-free-zone">
            <a href="https://t.me/DevJisanX" class="button telegram-channel">
                <div class="button-content">
                    <div class="logo-container">
                        <img src="https://i.postimg.cc/jjVtsTzZ/photo-2025-04-07-02-24-43.jpg" alt="Telegram Channel Logo" class="logo">
                    </div>
                    <div class="button-text">
                        <h3>Telegram Channel</h3>
                        <p>Join @DevJisanX</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right arrow"></i>
            </a>
            
            <a href="https://t.me/traderjisanx" class="button telegram-account">
                <div class="button-content">
                    <div class="logo-container">
                        <img src="https://i.postimg.cc/bY5MXT0R/photo-2025-05-01-04-18-39.jpg" alt="Telegram Account Logo" class="logo">
                    </div>
                    <div class="button-text">
                        <h3>Telegram Account</h3>
                        <p>Contact @traderjisanx</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right arrow"></i>
            </a>
            
            <a href="https://traderjisanx.vercel.app" class="button website">
                <div class="button-content">
                    <div class="logo-container">
                        <i class="fas fa-globe logo-icon"></i>
                    </div>
                    <div class="button-text">
                        <h3>Official Website</h3>
                        <p>Visit traderjisanx.vercel.app</p>
                    </div>
                </div>
                <i class="fas fa-chevron-right arrow"></i>
            </a>
        </div>
        
        <div class="footer snow-free-zone">
            <p>&copy; 2025 TraderJisan X. All rights reserved.</p>
        </div>
    </div>
    
    <script>
        // Track total snowflakes for performance monitoring
        let totalSnowflakes = 0;
        const MAX_SNOWFLAKES = 100; // Maximum number of snowflakes allowed at any time

        // Create floating snowflakes
        function createFloatingMoney() {
            const snowflakes = ['❄', '❅', '❆', '❉', '✻', '✼'];
            const body = document.querySelector('body');
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            
            // Limit based on screen size and performance
            const maxNewFlakes = Math.min(20, MAX_SNOWFLAKES - totalSnowflakes);
            
            // Skip creation if we're already at the limit
            if (totalSnowflakes >= MAX_SNOWFLAKES) {
                return;
            }
            
            // Create limited snowflakes based on screen size
            for (let i = 0; i < maxNewFlakes; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('floating-money');
                
                // Randomly select a snowflake
                const randomFlake = snowflakes[Math.floor(Math.random() * snowflakes.length)];
                snowflake.textContent = randomFlake;
                
                // Random size for variety
                const size = 10 + Math.random() * 20;
                snowflake.style.fontSize = `${size}px`;
                
                // Random starting position
                const startPositionX = Math.random() * windowWidth;
                const startPositionY = -50; // Start above screen
                
                // Random movement distance - slight horizontal drift
                const moveX = (Math.random() - 0.5) * 150;
                const moveY = windowHeight + 100 + Math.random() * 200; // Move downward
                
                // Random rotation - subtle for snowflakes
                const rotate = Math.random() * 180;
                
                // Random animation duration - slower for snowfall effect
                const duration = 7 + Math.random() * 15;
                
                // Random delay
                const delay = Math.random() * 15;
                
                // Set CSS properties
                snowflake.style.left = `${startPositionX}px`;
                snowflake.style.top = `${startPositionY}px`;
                snowflake.style.setProperty('--move-x', `${moveX}px`);
                snowflake.style.setProperty('--move-y', `${moveY}px`);
                snowflake.style.setProperty('--rotate', `${rotate}deg`);
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${delay}s`;
                
                // Track when animation ends to remove snowflake and maintain count
                snowflake.addEventListener('animationend', () => {
                    body.removeChild(snowflake);
                    totalSnowflakes--;
                });
                
                // Add to body and increment counter
                body.appendChild(snowflake);
                totalSnowflakes++;
            }
        }

        // Function to clean up any stuck snowflakes
        function cleanupSnowflakes() {
            const snowflakes = document.querySelectorAll('.floating-money');
            // Remove excess snowflakes if we're over our limit
            if (snowflakes.length > MAX_SNOWFLAKES) {
                const toRemove = snowflakes.length - MAX_SNOWFLAKES;
                for (let i = 0; i < toRemove; i++) {
                    if (snowflakes[i] && snowflakes[i].parentNode) {
                        snowflakes[i].parentNode.removeChild(snowflakes[i]);
                        totalSnowflakes--;
                    }
                }
            }
        }

        // Function to add hover effects to buttons
        function addButtonEffects() {
            const buttons = document.querySelectorAll('.button');
            
            buttons.forEach(button => {
                // Add pulse effect on mouseover
                button.addEventListener('mouseover', () => {
                    button.style.animation = 'pulse 0.5s';
                    setTimeout(() => {
                        button.style.animation = '';
                    }, 500);
                });
            });
        }

        // Function to create typing animation for the subtitle
        function typingAnimation() {
            const subtitle = document.querySelector('.subtitle');
            const text = subtitle.textContent;
            subtitle.textContent = '';
            
            let i = 0;
            const typing = setInterval(() => {
                if (i < text.length) {
                    subtitle.textContent += text.charAt(i);
                    i++;
                } else {
                    clearInterval(typing);
                }
            }, 50);
        }

        // Add smooth scroll behavior
        function setupSmoothScroll() {
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelector(this.getAttribute('href')).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        }

        // Function to create snowflakes around the container but not on buttons/text
        function createFrontSnowflakes() {
            const snowflakes = ['❄', '❅', '❆', '❉', '✻', '✼'];
            const container = document.querySelector('.container');
            const buttons = document.querySelectorAll('.button');
            const headerElements = document.querySelectorAll('.header *');
            const containerRect = container.getBoundingClientRect();
            const containerWidth = containerRect.width;
            const containerHeight = containerRect.height;
            const containerLeft = containerRect.left;
            const containerTop = containerRect.top;
            
            // Skip creation if we're already at the limit
            if (totalSnowflakes >= MAX_SNOWFLAKES) {
                return;
            }
            
            // Get all button rectangles to avoid placing snowflakes on them
            const avoidRects = [];
            buttons.forEach(button => {
                avoidRects.push(button.getBoundingClientRect());
            });
            
            // Add header elements to avoid rectangles
            headerElements.forEach(element => {
                avoidRects.push(element.getBoundingClientRect());
            });
            
            // Create limited front snowflakes
            const maxNewFrontFlakes = Math.min(10, MAX_SNOWFLAKES - totalSnowflakes);
            for (let i = 0; i < maxNewFrontFlakes; i++) {
                const snowflake = document.createElement('div');
                snowflake.classList.add('front-snowflake');
                
                // Randomly select a snowflake
                const randomFlake = snowflakes[Math.floor(Math.random() * snowflakes.length)];
                snowflake.textContent = randomFlake;
                
                // Random size for variety - smaller for snowflakes
                const size = 6 + Math.random() * 14;
                snowflake.style.fontSize = `${size}px`;
                
                // Position around container bounds, avoiding text and buttons
                let posX, posY;
                let tooClose = true;
                let attempts = 0;
                
                // Try to find a position that doesn't overlap with buttons/text
                while (tooClose && attempts < 20) {
                    posX = containerLeft - 50 + Math.random() * (containerWidth + 100);
                    posY = containerTop - 50 + Math.random() * (containerHeight + 100);
                    
                    // Check if this position is too close to any avoid rectangle
                    tooClose = avoidRects.some(rect => {
                        const padding = 10; // Buffer zone around elements
                        return (
                            posX > rect.left - padding && 
                            posX < rect.right + padding && 
                            posY > rect.top - padding && 
                            posY < rect.bottom + padding
                        );
                    });
                    
                    attempts++;
                }
                
                // If we couldn't find a good spot after attempts, place it outside the container
                if (tooClose) {
                    // Place snowflake on edges of container
                    const edge = Math.floor(Math.random() * 4); // 0=top, 1=right, 2=bottom, 3=left
                    switch(edge) {
                        case 0: // top
                            posX = containerLeft + Math.random() * containerWidth;
                            posY = containerTop - 20 - Math.random() * 50;
                            break;
                        case 1: // right
                            posX = containerLeft + containerWidth + 20 + Math.random() * 50;
                            posY = containerTop + Math.random() * containerHeight;
                            break;
                        case 2: // bottom
                            posX = containerLeft + Math.random() * containerWidth;
                            posY = containerTop + containerHeight + 20 + Math.random() * 50;
                            break;
                        case 3: // left
                            posX = containerLeft - 20 - Math.random() * 50;
                            posY = containerTop + Math.random() * containerHeight;
                            break;
                    }
                }
                
                // Random animation duration - slower for more elegant effect
                const duration = 10 + Math.random() * 20;
                
                // Random delay
                const delay = Math.random() * 10;
                
                // Set CSS properties
                snowflake.style.left = `${posX}px`;
                snowflake.style.top = `${posY}px`;
                snowflake.style.animationDuration = `${duration}s`;
                snowflake.style.animationDelay = `${delay}s`;
                
                // Track when animation ends to remove snowflake
                snowflake.addEventListener('animationend', () => {
                    if (snowflake.parentNode) {
                        snowflake.parentNode.removeChild(snowflake);
                        totalSnowflakes--;
                    }
                });
                
                // Add to body and increment counter
                document.body.appendChild(snowflake);
                totalSnowflakes++;
            }
        }

        // Function to clear snowflakes that might be over buttons or text
        function clearSnowflakesFromElements() {
            const snowflakes = document.querySelectorAll('.floating-money, .front-snowflake');
            const avoidElements = document.querySelectorAll('.snow-free-zone, .button, .button-content, .header *');
            
            snowflakes.forEach(flake => {
                const flakeRect = flake.getBoundingClientRect();
                
                avoidElements.forEach(element => {
                    const elementRect = element.getBoundingClientRect();
                    
                    // Check if flake overlaps with element
                    if (!(flakeRect.right < elementRect.left || 
                        flakeRect.left > elementRect.right || 
                        flakeRect.bottom < elementRect.top || 
                        flakeRect.top > elementRect.bottom)) {
                        
                        // If overlaps, move the flake outside
                        const randomDirection = Math.floor(Math.random() * 4);
                        switch(randomDirection) {
                            case 0: // Move left
                                flake.style.left = `${elementRect.left - flakeRect.width - 10}px`;
                                break;
                            case 1: // Move right
                                flake.style.left = `${elementRect.right + 10}px`;
                                break;
                            case 2: // Move up
                                flake.style.top = `${elementRect.top - flakeRect.height - 10}px`;
                                break;
                            case 3: // Move down
                                flake.style.top = `${elementRect.bottom + 10}px`;
                                break;
                        }
                    }
                });
            });
        }

        // Variables to track user activity and reduce animations when idle
        let lastInteractionTime = Date.now();
        let isPageVisible = true;
        let isReducedMotion = false;
        let idleTimeout = null;

        // Function to check if user prefers reduced motion
        function checkReducedMotion() {
            return window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        }

        // Function to check if user is idle (no interaction for over 30 seconds)
        function isUserIdle() {
            return Date.now() - lastInteractionTime > 30000; // 30 seconds
        }

        // Function to add idle class to body for CSS optimizations
        function setIdleState() {
            document.body.classList.add('idle-mode');
        }

        // Function to remove idle class when user becomes active
        function setActiveState() {
            document.body.classList.remove('idle-mode');
            
            // Clear any existing timeout
            if (idleTimeout) {
                clearTimeout(idleTimeout);
            }
            
            // Set new idle timeout
            idleTimeout = setTimeout(setIdleState, 30000);
        }

        // Function to adjust snowfall rate based on user activity and preferences
        function adjustSnowfallRate() {
            // Clear scheduled snowfall if needed
            const shouldPauseAnimations = !isPageVisible || isUserIdle() || isReducedMotion;
            
            if (shouldPauseAnimations) {
                // Reduce snowfall if user is idle or page not visible
                cleanupSnowflakes(); // Clean up excess snowflakes
            }
        }

        // Track user interaction
        function updateLastInteraction() {
            lastInteractionTime = Date.now();
            setActiveState();
        }

        // Function to clean up all existing snowflakes
        function removeAllSnowflakes() {
            const allSnowflakes = document.querySelectorAll('.floating-money, .front-snowflake');
            allSnowflakes.forEach(flake => {
                if (flake.parentNode) {
                    flake.parentNode.removeChild(flake);
                }
            });
            totalSnowflakes = 0;
        }

        // Initialize everything when DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Check user preferences
            isReducedMotion = checkReducedMotion();
            
            // Set initial idle timeout
            idleTimeout = setTimeout(setIdleState, 30000);
            
            // Initial creation with fewer snowflakes
            setTimeout(() => {
                const initialFlakes = isReducedMotion ? 15 : 30;
                totalSnowflakes = 0; // Reset counter
                for (let i = 0; i < initialFlakes; i++) {
                    if (i % 2 === 0) {
                        setTimeout(createFloatingMoney, 100 * i);
                    } else {
                        setTimeout(createFrontSnowflakes, 100 * i);
                    }
                }
            }, 500);
            
            addButtonEffects();
            typingAnimation();
            setupSmoothScroll();
            
            // User interaction tracking
            ['mousemove', 'click', 'keypress', 'scroll', 'touchstart'].forEach(event => {
                document.addEventListener(event, updateLastInteraction);
            });
            
            // Page visibility API
            document.addEventListener('visibilitychange', () => {
                isPageVisible = document.visibilityState === 'visible';
                adjustSnowfallRate();
            });
            
            // Check and clear snowflakes from important elements
            setInterval(clearSnowflakesFromElements, 2000);
            
            // Regularly clean up stuck snowflakes
            setInterval(cleanupSnowflakes, 5000);
            
            // Check user state and adjust animations
            setInterval(adjustSnowfallRate, 5000);
            
            // Recreate snowflakes for continuous snowfall effect, but at a reduced rate
            setInterval(() => {
                if (isPageVisible && !isUserIdle() && !isReducedMotion) {
                    createFloatingMoney();
                }
            }, 20000); // Reduced frequency: 20 seconds
            
            setInterval(() => {
                if (isPageVisible && !isUserIdle() && !isReducedMotion) {
                    createFrontSnowflakes();
                }
            }, 15000); // Reduced frequency: 15 seconds
        });

        // Add parallax effect to background and front snowflakes
        document.addEventListener('mousemove', (e) => {
            const moneyBg = document.querySelector('.money-background');
            const x = e.clientX / window.innerWidth;
            const y = e.clientY / window.innerHeight;
            
            moneyBg.style.transform = `translate(${x * 10}px, ${y * 10}px)`;
            
            // Add subtle movement to front snowflakes for more interactive feel
            const frontSnowflakes = document.querySelectorAll('.front-snowflake');
            frontSnowflakes.forEach(flake => {
                // Different movement factor for each snowflake for natural effect
                const moveFactor = (parseFloat(flake.style.fontSize) / 14) * 3;
                
                // Apply movement in opposite direction for subtle effect
                flake.style.marginLeft = `${(0.5 - x) * moveFactor}px`;
                flake.style.marginTop = `${(0.5 - y) * moveFactor}px`;
            });
            
            // Add glow effect to buttons on mouse proximity
            const buttons = document.querySelectorAll('.button');
            buttons.forEach(button => {
                const rect = button.getBoundingClientRect();
                const buttonCenterX = rect.left + rect.width/2;
                const buttonCenterY = rect.top + rect.height/2;
                
                // Calculate distance from mouse to button center
                const distX = e.clientX - buttonCenterX;
                const distY = e.clientY - buttonCenterY;
                const distance = Math.sqrt(distX * distX + distY * distY);
                
                // Add glow effect based on proximity
                if (distance < 200) {
                    const intensity = 1 - (distance / 200);
                    button.style.boxShadow = `0 0 ${20 * intensity}px rgba(137, 247, 254, ${0.5 * intensity})`;
                } else {
                    button.style.boxShadow = '';
                }
            });
        });
    </script>
</body>
</html>
